<div class="payment_page_inner_wrapper custom_pb">
  <!-- Top Bar -->
  <div class="common_page_back_wrapper">
    <div class="left_column">
      <button class="common_back_nav_btn">Create Invoice</button>
    </div>
  </div>

  <div class="payment_invoice_bill_content">
    <!-- Search/Filter Fields -->
    <div class="payment_inner_content1">
      <div
        class="fx-row fx-md-row fx-sm-row fx-xs-column fx-wrap fx-align-none fx-gap-15"
      >
        <div class="fxFlex fxFlex-50 fxFlex-sm-xs-100"></div>

        <div class="fxFlex fxFlex-50 fxFlex-sm-xs-100">
          <div
            class="fx-row fx-md-row fx-sm-row fx-xs-row fx-wrap fx-align-none fx-gap-30 fx-gap-sm-15 fx-gap-xs-15"
          >
            <div
              class="fxFlex fxFlex-25 fxFlex-md-25 fxFlex-sm-25 fxFlex-xs-50"
            >
              <mat-form-field class="default_field_control" appearance="fill">
                <mat-label>Invoice Ref#</mat-label>
                <input matInput value="12095" />
              </mat-form-field>
            </div>

            <div
              class="fxFlex fxFlex-25 fxFlex-md-25 fxFlex-sm-25 fxFlex-xs-50"
            >
              <mat-form-field class="default_field_control" appearance="fill">
                <mat-label>Date</mat-label>
                <input matInput [matDatepicker]="picker" />
                <mat-datepicker-toggle matIconSuffix [for]="picker">
                  <mat-icon
                    class="material-icons-outlined light_icon"
                    matDatepickerToggleIcon
                    >event</mat-icon
                  >
                </mat-datepicker-toggle>
                <mat-datepicker #picker></mat-datepicker>
              </mat-form-field>
            </div>

            <div
              class="fxFlex fxFlex-25 fxFlex-md-25 fxFlex-sm-25 fxFlex-xs-50"
            >
              <mat-form-field
                class="default_field_control light_arrow_field"
                appearance="fill"
              >
                <mat-label>Net Terms</mat-label>
                <mat-select>
                  <mat-option value="1" selected>Net 10</mat-option>
                  <mat-option value="2">Net 20</mat-option>
                </mat-select>
              </mat-form-field>
            </div>

            <div
              class="fxFlex fxFlex-25 fxFlex-md-25 fxFlex-sm-25 fxFlex-xs-50"
            >
              <mat-form-field class="default_field_control" appearance="fill">
                <mat-label>Due Date</mat-label>
                <input matInput [matDatepicker]="picker2" />
                <mat-datepicker-toggle matIconSuffix [for]="picker2">
                  <mat-icon
                    class="material-icons-outlined light_icon"
                    matDatepickerToggleIcon
                    >event</mat-icon
                  >
                </mat-datepicker-toggle>
                <mat-datepicker #picker2></mat-datepicker>
              </mat-form-field>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Table Start -->
    <div class="payment_inner_content2">
      <div class="mat_table_main_wrapper mat_table_border_grid">
        <mat-table [dataSource]="dataSource">
          <!-- Item Column -->
          <ng-container matColumnDef="item">
            <mat-header-cell *matHeaderCellDef>Item</mat-header-cell>
            <mat-cell *matCellDef="let element">
              <div class="responsive_table_row">
                <div class="responsive_td_title">Item</div>
                <div class="responsive_td_content">
                  <div
                    class="info_tooltip_wrapper info_text ml_0 stable_tooltip"
                  >
                    <mat-form-field
                      class="default_field_control table_col_field"
                      appearance="fill"
                    >
                      <input
                        matInput
                        type="text"
                        placeholder="Select Item"
                        [matAutocomplete]="auto"
                      />
                      <span class="mat_field_left_icon" matTextPrefix>
                        <img
                          src="../../../../assets/images/field-icons/search-icon.png"
                          alt=""
                        />
                      </span>
                      <mat-autocomplete
                        class="searchable_card_dropdown"
                        #auto="matAutocomplete"
                      >
                        <mat-option value="1"
                          >Cranes Operations Service</mat-option
                        >
                        <mat-option value="2">Crane Lift Lease</mat-option>
                        <mat-option value="3"
                          >Crane Operator Man hours</mat-option
                        >
                        <button mat-flat-button class="add_list_button">
                          Add new item +
                        </button>
                      </mat-autocomplete>
                    </mat-form-field>
                    <div
                      class="info_tooltip gray_tooltip center_tooltip top_tooltip invalid_tooltip"
                      style="display: none"
                    >
                      <div class="info_tooltip_inner">
                        Item selection is required.
                      </div>
                    </div>
                  </div>

                  <div class="mat_td_inner" style="display: none">
                    <div class="product_name">{{ element.item }}</div>
                  </div>

                  <!-- Mobile Action Button -->
                  <button class="transparent_icon_btn mobile_btn">
                    <img
                      src="../../../../assets/images/trash-icon.png"
                      alt="Delete"
                    />
                  </button>
                </div>
              </div>
            </mat-cell>
          </ng-container>

          <!-- Description Column -->
          <ng-container matColumnDef="description">
            <mat-header-cell *matHeaderCellDef>Description</mat-header-cell>
            <mat-cell *matCellDef="let element">
              <div class="responsive_table_row">
                <div class="responsive_td_title">Description</div>
                <div class="responsive_td_content">
                  <!-- Condition 1 -->
                  <div class="info_tooltip_wrapper info_text ml_0">
                    <mat-form-field
                      class="default_field_control table_col_field"
                      appearance="fill"
                    >
                      <input matInput placeholder="type here (optional)" />
                    </mat-form-field>
                    <div
                      class="info_tooltip gray_tooltip center_tooltip top_tooltip invalid_tooltip"
                    >
                      <div class="info_tooltip_inner">
                        Invalid input. Only letters (a-z, A-Z), numbers (0-9),
                        &, -, _, and . are allowed.
                      </div>
                    </div>
                  </div>

                  <!-- Condition 2 -->
                  <div class="mat_td_inner" style="display: none">
                    {{ element.description }}
                  </div>
                </div>
              </div>
            </mat-cell>
          </ng-container>

          <!-- Qty / Hours Column -->
          <ng-container matColumnDef="qtyHours">
            <mat-header-cell
              *matHeaderCellDef
              class="center_td_column custom_column_width1"
              >Qty / Hours</mat-header-cell
            >
            <mat-cell
              *matCellDef="let element"
              class="center_td_column custom_column_width1"
            >
              <div class="responsive_table_row">
                <div class="responsive_td_title">Qty / Hours</div>
                <div class="responsive_td_content">
                  <!-- Condition 1 -->
                  <div class="info_tooltip_wrapper info_text ml_0">
                    <mat-form-field
                      class="default_field_control table_col_field center_col_field"
                      appearance="fill"
                    >
                      <input matInput type="number" placeholder="1" />
                    </mat-form-field>
                    <div
                      class="info_tooltip gray_tooltip center_tooltip top_tooltip invalid_tooltip"
                    >
                      <div class="info_tooltip_inner">
                        Invalid input. Only numbers with a total length of 8
                        digits plus up to 2 decimal places are allowed.
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </mat-cell>
          </ng-container>

          <!-- Rate (USD) Column -->
          <ng-container matColumnDef="rate">
            <mat-header-cell
              *matHeaderCellDef
              class="right_td_column custom_column_width2"
              >Rate (USD)</mat-header-cell
            >
            <mat-cell *matCellDef="let element" class="custom_column_width2">
              <div class="responsive_table_row">
                <div class="responsive_td_title">Rate (USD)</div>
                <div class="responsive_td_content">
                  <!-- Condition 1 -->
                  <div class="info_tooltip_wrapper info_text ml_0">
                    <mat-form-field
                      class="default_field_control table_col_field right_col_field"
                      appearance="fill"
                    >
                      <input matInput type="number" placeholder="0.00" />
                      <span
                        class="mat_field_left_icon with_text_icon"
                        matTextPrefix
                        >$</span
                      >
                    </mat-form-field>
                    <div
                      class="info_tooltip gray_tooltip center_tooltip top_tooltip invalid_tooltip"
                    >
                      <div class="info_tooltip_inner">
                        Invalid input. Only numbers with a total length of 8
                        digits plus up to 2 decimal places are allowed.
                      </div>
                    </div>
                  </div>

                  <!-- Condition 2  - TOdo:  To show pre-saved invoice, in coming increment will handle .-->
                  <div class="mat_td_inner" style="display: none">
                    <div class="mat_td_amount_row">
                      <div class="mat_td_amount_col currency_col">$</div>
                      <div class="mat_td_amount_col">{{ element.rate }}</div>
                    </div>
                  </div>
                </div>
              </div>
            </mat-cell>
          </ng-container>

          <!-- Amount (USD) Column -->
          <ng-container matColumnDef="amount">
            <mat-header-cell
              *matHeaderCellDef
              class="right_td_column custom_column_width2"
              >Amount (USD)</mat-header-cell
            >
            <mat-cell *matCellDef="let element" class="custom_column_width2">
              <div class="responsive_table_row">
                <div class="responsive_td_title">Amount (USD)</div>
                <div class="responsive_td_content">
                  <div class="mat_td_inner">
                    <div class="mat_td_amount_row">
                      <div class="mat_td_amount_col currency_col">$</div>
                      <div class="mat_td_amount_col">{{ element.amount }}</div>
                    </div>
                  </div>
                </div>
              </div>
            </mat-cell>
          </ng-container>

          <!-- Action Column -->
          <ng-container matColumnDef="action">
            <mat-header-cell
              *matHeaderCellDef
              class="custom_column_width4"
            ></mat-header-cell>
            <mat-cell *matCellDef="let element" class="custom_column_width4">
              <div class="responsive_table_row">
                <div class="responsive_td_title"></div>
                <div class="responsive_td_content">
                  <div class="mat_td_inner">
                    <!-- {{ element.action }} -->
                    <div class="info_tooltip_wrapper info_text relative">
                      <button class="transparent_icon_btn">
                        <img
                          src="../../../../assets/images/trash-icon.png"
                          alt="Delete"
                        />
                      </button>
                      <div
                        class="info_tooltip white_tooltip right_tooltip multiple_line_tooltip delete_tooltip"
                      >
                        <div class="info_tooltip_inner">
                          <p>Are you sure you want to delete this record?</p>

                          <div class="info_tooltip_footer">
                            <button
                              mat-flat-button
                              class="common_btn gray_btn border_200"
                            >
                              No
                            </button>
                            <button
                              mat-flat-button
                              class="common_btn black_btn border_200"
                            >
                              Yes
                            </button>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </mat-cell>
          </ng-container>

          <mat-header-row *matHeaderRowDef="displayedColumns"></mat-header-row>
          <mat-row *matRowDef="let row; columns: displayedColumns"></mat-row>
        </mat-table>
      </div>
    </div>

    <div class="payment_inner_content3">
      <div class="table_data_total_wrap">
        <div class="table_data_total_row">
          <div class="table_data_total_col">
            <button class="transparent_btn ml_15">+ Add More</button>
          </div>
          <div class="table_data_total_col">
            <div class="table_data_total_box">
              <div class="table_data_inner_table">
                <div class="table_data_inner_table_row">
                  <div class="table_data_inner_table_col right_align_col">
                    <h4 class="mat-h4">Invoice Total</h4>
                  </div>
                  <div class="table_data_inner_table_col right_align_col">
                    <h4 class="mat-h4">$5,148.00</h4>
                  </div>
                  <div class="table_data_inner_table_col last_td">&nbsp;</div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <div class="table_data_total_row">
          <div class="table_data_total_col mobile_last">
            <mat-form-field
              class="default_field_control gray_field"
              appearance="fill"
            >
              <mat-label>Enter a message for your customer.</mat-label>
              <textarea matInput></textarea>
            </mat-form-field>
          </div>
          <div
            class="table_data_total_col mobile_second_last"
            style="justify-content: flex-end"
          >
            <button
              mat-stroked-button
              class="common_btn black_btn fluid_btn border_200"
              (click)="createInvoice()"
            >
              Create
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
